{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///G:/PH/Nextjs/winter-dog-care-N/lib/mongodb.js"],"sourcesContent":["import { MongoClient } from 'mongodb';\r\n\r\nconst uri = process.env.MONGODB_URI;\r\nconst options = {};\r\n\r\nlet client;\r\nlet clientPromise;\r\n\r\nif (!process.env.MONGODB_URI) {\r\n  throw new Error('Please add your Mongo URI to .env.local');\r\n}\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  if (!global._mongoClientPromise) {\r\n    client = new MongoClient(uri, options);\r\n    global._mongoClientPromise = client.connect();\r\n  }\r\n  clientPromise = global._mongoClientPromise;\r\n} else {\r\n  client = new MongoClient(uri, options);\r\n  clientPromise = client.connect();\r\n}\r\n\r\nexport default clientPromise;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;AACnC,MAAM,UAAU,CAAC;AAEjB,IAAI;AACJ,IAAI;AAEJ,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;IAC5B,MAAM,IAAI,MAAM;AAClB;AAEA,wCAA4C;IAC1C,IAAI,CAAC,yDAAO,mBAAmB,EAAE;QAC/B,SAAS,IAAI,sHAAW,CAAC,KAAK;QAC9B,yDAAO,mBAAmB,GAAG,OAAO,OAAO;IAC7C;IACA,gBAAgB,yDAAO,mBAAmB;AAC5C;;uCAKe"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///G:/PH/Nextjs/winter-dog-care-N/app/api/products/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport clientPromise from '@/lib/mongodb';\r\n\r\n// GET - Fetch products\r\nexport async function GET(request) {\r\n  try {\r\n    const client = await clientPromise;\r\n    const db = client.db('winter-dog-care-01');\r\n    \r\n    // Get user ID from query params (optional)\r\n    const { searchParams } = new URL(request.url);\r\n    const userId = searchParams.get('userId');\r\n\r\n    let products;\r\n    \r\n    if (userId) {\r\n      // Fetch products only for this user\r\n      products = await db\r\n        .collection('products')\r\n        .find({ createdBy: userId })\r\n        .sort({ createdAt: -1 })\r\n        .toArray();\r\n    } else {\r\n      // Fetch all products (for homepage/public view)\r\n      products = await db\r\n        .collection('products')\r\n        .find({})\r\n        .sort({ createdAt: -1 })\r\n        .toArray();\r\n    }\r\n\r\n    // Get section info (for homepage)\r\n    const section = await db.collection('sections')\r\n      .findOne({ name: 'popular-products' });\r\n\r\n    return NextResponse.json({ \r\n      success: true,\r\n      products,\r\n      section: section || { title: 'Popular Products', subtitle: 'Best sellers this winter season' }\r\n    }, { status: 200 });\r\n\r\n  } catch (error) {\r\n    console.error('Error fetching products:', error);\r\n    return NextResponse.json({ \r\n      success: false,\r\n      error: 'Failed to fetch products' \r\n    }, { status: 500 });\r\n  }\r\n}\r\n\r\n// POST - Create new product\r\nexport async function POST(request) {\r\n  try {\r\n    const body = await request.json();\r\n\r\n    // Validate required fields\r\n    if (!body.createdBy) {\r\n      return NextResponse.json({ \r\n        success: false,\r\n        error: 'User ID required' \r\n      }, { status: 401 });\r\n    }\r\n\r\n    if (!body.title || !body.price || !body.category) {\r\n      return NextResponse.json({ \r\n        success: false,\r\n        error: 'Missing required fields' \r\n      }, { status: 400 });\r\n    }\r\n\r\n    const client = await clientPromise;\r\n    const db = client.db('winter-dog-care-01'); // Change to your database name\r\n    \r\n    // Prepare product data\r\n    const productData = {\r\n      ...body,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date()\r\n    };\r\n    \r\n    const result = await db.collection('products').insertOne(productData);\r\n\r\n    return NextResponse.json({ \r\n      success: true,\r\n      message: 'Product created successfully',\r\n      productId: result.insertedId \r\n    }, { status: 201 });\r\n\r\n  } catch (error) {\r\n    console.error('Error creating product:', error);\r\n    return NextResponse.json({ \r\n      success: false,\r\n      error: 'Failed to create product' \r\n    }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAGO,eAAe,IAAI,OAAO;IAC/B,IAAI;QACF,MAAM,SAAS,MAAM,2HAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC;QAErB,2CAA2C;QAC3C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC;QAEhC,IAAI;QAEJ,IAAI,QAAQ;YACV,oCAAoC;YACpC,WAAW,MAAM,GACd,UAAU,CAAC,YACX,IAAI,CAAC;gBAAE,WAAW;YAAO,GACzB,IAAI,CAAC;gBAAE,WAAW,CAAC;YAAE,GACrB,OAAO;QACZ,OAAO;YACL,gDAAgD;YAChD,WAAW,MAAM,GACd,UAAU,CAAC,YACX,IAAI,CAAC,CAAC,GACN,IAAI,CAAC;gBAAE,WAAW,CAAC;YAAE,GACrB,OAAO;QACZ;QAEA,kCAAkC;QAClC,MAAM,UAAU,MAAM,GAAG,UAAU,CAAC,YACjC,OAAO,CAAC;YAAE,MAAM;QAAmB;QAEtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;YACA,SAAS,WAAW;gBAAE,OAAO;gBAAoB,UAAU;YAAkC;QAC/F,GAAG;YAAE,QAAQ;QAAI;IAEnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;QACT,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF;AAGO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,2BAA2B;QAC3B,IAAI,CAAC,KAAK,SAAS,EAAE;YACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,QAAQ,EAAE;YAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,MAAM,SAAS,MAAM,2HAAa;QAClC,MAAM,KAAK,OAAO,EAAE,CAAC,uBAAuB,+BAA+B;QAE3E,uBAAuB;QACvB,MAAM,cAAc;YAClB,GAAG,IAAI;YACP,WAAW,IAAI;YACf,WAAW,IAAI;QACjB;QAEA,MAAM,SAAS,MAAM,GAAG,UAAU,CAAC,YAAY,SAAS,CAAC;QAEzD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,WAAW,OAAO,UAAU;QAC9B,GAAG;YAAE,QAAQ;QAAI;IAEnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;QACT,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF"}}]
}