{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///G:/PH/Nextjs/winter-dog-care-N/components/ProductCard.js"],"sourcesContent":["'use client'; // Add this at the top\r\n\r\nimport Link from 'next/link';\r\n\r\nexport default function ProductCard({ product }) {\r\n  const emojis = ['üß•', 'üêæ', 'üçñ', 'ü¶¥', 'ü•æ', 'üß§', 'üß£', 'üéí'];\r\n  const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];\r\n  \r\n  // Get ID (try both formats)\r\n  const productId = product._id || product.id;\r\n\r\n  // DEBUG: Check console to see if ID is printing\r\n  console.log(\"Product:\", product.title, \"ID:\", productId);\r\n\r\n  if (!productId) {\r\n    return <div className=\"bg-red-100 p-4\">Error: Missing Product ID</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition transform hover:-translate-y-2\">\r\n      <div className={`h-48 bg-gradient-to-br ${product.gradient || 'from-blue-400 to-blue-600'} flex items-center justify-center text-8xl`}>\r\n        {product.emoji || randomEmoji}\r\n      </div>\r\n     <div className=\"p-6\">\r\n        <div className=\"flex justify-between items-start mb-2\">\r\n          <h3 className=\"text-xl font-bold text-gray-900\">{product.title}</h3>\r\n          <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full\">\r\n            {product.category}\r\n          </span>\r\n        </div>\r\n        <p className=\"text-gray-600 mb-4 line-clamp-2\">\r\n          {product.shortDescription}\r\n        </p>\r\n        <div className=\"flex justify-between items-center\">\r\n          <span className=\"text-2xl font-bold text-blue-600\">${product.price}</span>\r\n          \r\n          {/* LINK TO DETAIL PAGE */}\r\n          <Link \r\n            href={`/products/${productId}`}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition\"\r\n          >\r\n            Details\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA,cAAc,sBAAsB;;;AAIrB,SAAS,YAAY,EAAE,OAAO,EAAE;IAC7C,MAAM,SAAS;QAAC;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;KAAK;IAC/D,MAAM,cAAc,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO,MAAM,EAAE;IAErE,4BAA4B;IAC5B,MAAM,YAAY,QAAQ,GAAG,IAAI,QAAQ,EAAE;IAE3C,gDAAgD;IAChD,QAAQ,GAAG,CAAC,YAAY,QAAQ,KAAK,EAAE,OAAO;IAE9C,IAAI,CAAC,WAAW;QACd,qBAAO,8OAAC;YAAI,WAAU;sBAAiB;;;;;;IACzC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAW,CAAC,uBAAuB,EAAE,QAAQ,QAAQ,IAAI,4BAA4B,0CAA0C,CAAC;0BAClI,QAAQ,KAAK,IAAI;;;;;;0BAErB,8OAAC;gBAAI,WAAU;;kCACZ,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAmC,QAAQ,KAAK;;;;;;0CAC9D,8OAAC;gCAAK,WAAU;0CACb,QAAQ,QAAQ;;;;;;;;;;;;kCAGrB,8OAAC;wBAAE,WAAU;kCACV,QAAQ,gBAAgB;;;;;;kCAE3B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;;oCAAmC;oCAAE,QAAQ,KAAK;;;;;;;0CAGlE,8OAAC,uKAAI;gCACH,MAAM,CAAC,UAAU,EAAE,WAAW;gCAC9B,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///G:/PH/Nextjs/winter-dog-care-N/app/products/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/context/AuthContext'; // Import Auth\r\nimport ProductCard from '@/components/ProductCard'; // Import Card\r\nimport Link from 'next/link';\r\n\r\nexport default function ProductsPage() {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  \r\n  // 1. Get User\r\n  const { user, loading: authLoading } = useAuth();\r\n\r\n  useEffect(() => {\r\n    // Only fetch if user is logged in\r\n    if (user) {\r\n      fetchProducts();\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      // 2. FIX: Fetch ALL products (Removed ?userId=...)\r\n      // We want to see the whole catalog, not just what we created\r\n      const response = await fetch('/api/products'); \r\n      const data = await response.json();\r\n      \r\n      if (data.products) {\r\n        const productsData = data.products.map(product => ({\r\n          ...product,\r\n          id: product._id.toString(),\r\n        }));\r\n        setProducts(productsData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter products\r\n  const filteredProducts = products.filter(product => {\r\n    const matchesSearch = (product.title || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         (product.shortDescription || '').toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesCategory = selectedCategory === 'all' || product.category === selectedCategory;\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  // 3. Loading State (Auth or Data)\r\n  if (authLoading || (loading && user)) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center pt-16\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mb-4\"></div>\r\n          <p className=\"text-xl text-gray-600\">Loading catalog...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 4. Protect the Page (Redirect or Show Login Msg)\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center pt-16\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-6xl mb-4\">üîí</div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Login Required</h2>\r\n          <p className=\"text-gray-600 mb-6\">You must be logged in to view our products.</p>\r\n          <Link href=\"/login\" className=\"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition\">\r\n            Go to Login\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 5. Show the Products\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 pt-16\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n        <div className=\"text-center mb-12\">\r\n          <h1 className=\"text-4xl md:text-5xl font-bold text-gray-900 mb-4\">\r\n            Winter Dog Care Catalog\r\n          </h1>\r\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\r\n            Welcome back, {user.displayName || user.email}!\r\n          </p>\r\n        </div>\r\n\r\n        {/* Search/Filter Bar */}\r\n        <div className=\"bg-white rounded-xl shadow-md p-6 mb-8\">\r\n          <div className=\"grid md:grid-cols-2 gap-4\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search products...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-lg\"\r\n            />\r\n            <select\r\n              value={selectedCategory}\r\n              onChange={(e) => setSelectedCategory(e.target.value)}\r\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-lg\"\r\n            >\r\n              <option value=\"all\">All Categories</option>\r\n              <option value=\"Clothing\">Clothing</option>\r\n              <option value=\"Accessories\">Accessories</option>\r\n              <option value=\"Nutrition\">Nutrition</option>\r\n              <option value=\"Bedding\">Bedding</option>\r\n              <option value=\"Toys\">Toys</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Grid */}\r\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n          {filteredProducts.map(product => (\r\n            <ProductCard key={product.id} product={product} />\r\n          ))}\r\n        </div>\r\n        \r\n        {filteredProducts.length === 0 && (\r\n          <p className=\"text-center text-gray-500\">No products found.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}